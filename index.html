<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ... (meglévő head tartalom) ... -->
</head>
<body>
    <div class="container">
        <img src="logo.png" alt="PosithINK Tattooshop Logo" class="logo">
        <h1>Posith<span>INK</span> Tattooshop Point Collector</h1>
        
        <div class="card fade-in">
            <h2><i class="fas fa-plus-circle"></i> Add Points</h2>
            <form id="point-form" autocomplete="on">
                <label for="name">
                    <i class="fas fa-user"></i>
                    <input type="text" id="name" name="name" placeholder="Name" autocomplete="name" required>
                </label>
                <label for="phone">
                    <i class="fas fa-phone"></i>
                    <input type="tel" id="phone" name="phone" placeholder="Phone" autocomplete="tel" required>
                </label>
                <label for="euros">
                    <i class="fas fa-euro-sign"></i>
                    <input type="number" id="euros" name="euros" placeholder="Euros" step="0.01" autocomplete="off" required>
                </label>
                <label for="date">
                    <i class="fas fa-calendar-alt"></i>
                    <input type="datetime-local" id="date" name="date" required>
                </label>
                <button type="submit"><i class="fas fa-save"></i> Submit</button>
            </form>
        </div>
        
        <div class="card fade-in">
            <h2><i class="fas fa-search"></i> Search Customer</h2>
            <form id="search-form">
                <label for="search-name">
                    <i class="fas fa-user-search"></i>
                    <input type="text" id="search-name" name="search-name" placeholder="Customer Name" required>
                </label>
                <button type="submit"><i class="fas fa-search"></i> Search</button>
            </form>
            <div id="search-results"></div>
        </div>
        
        <div id="total-points" class="card fade-in">
            <h2><i class="fas fa-chart-bar"></i> Total Points</h2>
        </div>
        
        <div class="card fade-in">
            <h2><i class="fas fa-list"></i> Collected Points</h2>
            <ul id="points-list"></ul>
        </div>
    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
      import { getFirestore, collection, addDoc, getDocs, query, where, orderBy } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyDVahS6mRJVAoMYXuufHzMfu1YZ8GlkV7k",
        authDomain: "point-collector-8f37f.firebaseapp.com",
        projectId: "point-collector-8f37f",
        storageBucket: "point-collector-8f37f.appspot.com",
        messagingSenderId: "381353241547",
        appId: "1:381353241547:web:9a85b70b419c32811ee44e",
        measurementId: "G-3BWW13LHSD"
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // ... (többi függvény változatlan marad) ...

      function initializeEventListeners() {
        const pointForm = document.getElementById('point-form');
        const searchForm = document.getElementById('search-form');

        if (pointForm) {
          pointForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const euros = parseFloat(document.getElementById('euros').value);
            const date = document.getElementById('date').value;
            await savePoints(name, phone, euros, date);
          });
        } else {
          console.error('Point form not found');
        }

        if (searchForm) {
          searchForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = document.getElementById('search-name').value;
            await searchCustomer(name);
          });
        } else {
          console.error('Search form not found');
        }
      }

      // Várjuk meg, amíg a DOM teljesen betöltődik
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
          initializeEventListeners();
          fetchPoints();
          fetchTotalPoints();
          document.querySelectorAll('.card').forEach(card => fadeIn(card));
        });
      } else {
        initializeEventListeners();
        fetchPoints();
        fetchTotalPoints();
        document.querySelectorAll('.card').forEach(card => fadeIn(card));
      }

      // Új funkció a fade-in animációhoz
      function fadeIn(element) {
        element.classList.add('fade-in');
      }
    </script>
</body>
</html>
